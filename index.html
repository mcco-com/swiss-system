<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Primary Meta Tags -->
    <title>Swiss Tournament App - Download Now</title>
    <meta name="title" content="Swiss Tournament App - Download Now">
    <meta name="description" content="Free chess tournament management app using the Swiss system. Organize local tournaments offline with powerful features.">
    <meta name="keywords" content="chess, tournament, Swiss system, manager, offline, free, download, app">
    <meta name="author" content="Swiss Tournament Platform">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/">
    <meta property="og:title" content="Swiss Tournament App - Download Now">
    <meta property="og:description" content="Free chess tournament management app using the Swiss system. Organize local tournaments offline with powerful features.">
    <meta property="og:image" content="https://yourdomain.com/assets/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://yourdomain.com/">
    <meta property="twitter:title" content="Swiss Tournament App - Download Now">
    <meta property="twitter:description" content="Free chess tournament management app using the Swiss system. Organize local tournaments offline with powerful features.">
    <meta property="twitter:image" content="https://yourdomain.com/assets/images/og-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Swiss Tournament App",
      "description": "Free chess tournament management app using the Swiss system",
      "applicationCategory": "SportsApplication",
      "operatingSystem": "Android",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "Swiss Tournament Platform"
      }
    }
    </script>

<style>
:root {
  --dark: #64442c;
  --light: #f0d4ac;
  --bg: #3a2719;
  --card: #4b3422;
  --panel: #5a3d27;
  --text: #f7e8d3;
  --muted: #d8c0a1;
  --accent: #f0d4ac;
  --success: #4CAF50;
  --error: #f44336;
  --info: #2196F3;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: system-ui, -apple-system, 'Segoe UI', Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  line-height: 1.6;
  background-image: 
    radial-gradient(circle at 20% 80%, rgba(240,212,172,0.18) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(240,212,172,0.12) 0%, transparent 50%);
  opacity: 0;
  transform: translateY(20px);
  transition: opacity .4s ease, transform 1s ease-in-out;
  padding: 20px;
}

body.loaded {
  opacity: 1;
  transform: translateY(0);
}

.container {
  max-width: 1100px;
  margin: 0 auto;
}

/* Header */
.header {
  text-align: center;
  padding: 40px 0 30px;
  border-bottom: 1px solid rgba(240,212,172,0.2);
  margin-bottom: 40px;
}

.logo {
  width: 120px;
  height: 120px;
  margin: 0 auto 20px;
  background: linear-gradient(135deg, var(--accent), var(--dark));
  border-radius: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8px 25px rgba(0,0,0,0.4);
  border: 3px solid var(--accent);
}

.logo-icon {
  font-size: 60px;
  color: var(--bg);
}

h1 {
  font-size: 42px;
  background: linear-gradient(90deg, #fff, var(--accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 10px;
}

.tagline {
  font-size: 18px;
  color: var(--muted);
  max-width: 600px;
  margin: 0 auto;
}

/* Main Content */
.content-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 40px;
  margin-bottom: 50px;
}

@media (max-width: 768px) {
  .content-grid {
    grid-template-columns: 1fr;
  }
}

/* App Info Card */
.app-card {
  background: linear-gradient(180deg, rgba(90, 61, 39, 0.4), rgba(58, 39, 25, 0.4));
  padding: 30px;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.1);
  backdrop-filter: blur(8px);
}

.app-card h2 {
  color: var(--accent);
  margin-bottom: 25px;
  font-size: 28px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.features-list {
  list-style: none;
  margin: 25px 0;
}

.features-list li {
  padding: 12px 0;
  border-bottom: 1px solid rgba(240,212,172,0.1);
  display: flex;
  align-items: center;
  gap: 12px;
}

.features-list li:last-child {
  border-bottom: none;
}

.feature-icon {
  color: var(--accent);
  font-size: 22px;
  flex-shrink: 0;
}

/* Release Info */
.release-card {
  background: linear-gradient(180deg, rgba(90, 61, 39, 0.4), rgba(58, 39, 25, 0.4));
  padding: 30px;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.1);
  backdrop-filter: blur(8px);
}

.release-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.version-badge {
  background: var(--accent);
  color: var(--bg);
  padding: 6px 15px;
  border-radius: 20px;
  font-weight: bold;
  font-size: 16px;
}

.release-date {
  color: var(--muted);
  font-size: 14px;
}

.release-body {
  margin-bottom: 30px;
}

.release-notes {
  background: rgba(0,0,0,0.2);
  padding: 20px;
  border-radius: 10px;
  max-height: 300px;
  overflow-y: auto;
  margin-top: 15px;
}

.release-notes::-webkit-scrollbar {
  width: 6px;
}

.release-notes::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 3px;
}

/* Download Section */
.download-section {
  text-align: center;
  padding: 40px 0;
  margin: 50px 0;
  border-top: 1px solid rgba(240,212,172,0.2);
  border-bottom: 1px solid rgba(240,212,172,0.2);
}

.download-btn {
  display: inline-flex;
  align-items: center;
  gap: 15px;
  background: linear-gradient(135deg, var(--accent), var(--dark));
  color: var(--bg);
  text-decoration: none;
  padding: 20px 40px;
  border-radius: 50px;
  font-size: 22px;
  font-weight: bold;
  margin: 20px 0;
  transition: all 0.3s ease;
  box-shadow: 0 10px 30px rgba(240,212,172,0.3);
}

.download-btn:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(240,212,172,0.4);
}

.download-btn .material-icons {
  font-size: 32px;
}

.file-size {
  color: var(--muted);
  font-size: 14px;
  margin-top: 10px;
}

/* Tips Section */
.tips-section {
  margin: 40px 0;
  padding: 25px;
  background: rgba(90,61,39,0.2);
  border-radius: 12px;
  border-left: 4px solid var(--accent);
}

.tip-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px;
  color: var(--accent);
}

.tip-content {
  font-style: italic;
  line-height: 1.8;
}

.refresh-tip {
  background: none;
  border: none;
  color: var(--accent);
  cursor: pointer;
  font-size: 20px;
  padding: 5px;
  border-radius: 50%;
  transition: all 0.3s;
}

.refresh-tip:hover {
  transform: rotate(90deg);
  background: rgba(240,212,172,0.1);
}

/* Footer */
.footer {
  margin-top: 60px;
  padding-top: 30px;
  border-top: 1px solid rgba(240,212,172,0.2);
  text-align: center;
}

.footer-links {
  display: flex;
  justify-content: center;
  gap: 30px;
  margin: 25px 0;
  flex-wrap: wrap;
}

.footer-links a {
  color: var(--accent);
  text-decoration: none;
  position: relative;
  padding: 5px 0;
  transition: color 0.3s;
}

.footer-links a::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 1px;
  background: var(--accent);
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.footer-links a:hover {
  color: var(--text);
}

.footer-links a:hover::after {
  transform: scaleX(1);
}

.copyright {
  color: var(--muted);
  font-size: 14px;
  margin-top: 25px;
}

/* Language Switcher */
.lang-switcher {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(90,61,39,0.8);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(240,212,172,0.3);
  color: var(--accent);
  padding: 12px 20px;
  border-radius: 25px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: bold;
  transition: all 0.3s;
}

.lang-btn:hover {
  background: rgba(90,61,39,0.9);
  transform: translateY(-2px);
}

/* Loading States */
.loading {
  opacity: 0.7;
  pointer-events: none;
}

.skeleton {
  background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
  border-radius: 4px;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Animations */
.fade-in {
  animation: fadeIn 0.5s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* RTL Support */
html[dir="rtl"] .tips-section {
  border-left: none;
  border-right: 4px solid var(--accent);
}

html[dir="rtl"] .lang-switcher {
  right: auto;
  left: 20px;
}

html[dir="rtl"] .feature-icon {
  transform: scaleX(-1);
}
</style>

<!-- Material Icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>
<body>

<div class="container">
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <span class="material-icons logo-icon">emoji_events</span>
        </div>
        <h1 id="pageTitle">Swiss Tournament App</h1>
        <p class="tagline" id="pageSubtitle">Free chess tournament management using the Swiss system</p>
    </header>

    <!-- Main Content -->
    <main>
        <div class="content-grid">
            <!-- App Info -->
            <section class="app-card">
                <h2><span class="material-icons">info</span> <span id="appInfoTitle">App Information</span></h2>
                <p id="appDescription">A powerful offline tournament manager for chess competitions using the Swiss system. Perfect for local clubs and events.</p>
                
                <ul class="features-list" id="featuresList">
                    <!-- Features will be populated by JavaScript -->
                </ul>
                
                <div class="system-requirements">
                    <h3><span class="material-icons">devices</span> <span id="requirementsTitle">Requirements</span></h3>
                    <p id="requirementsText">Android 6.0+ • 50MB free space • No internet required</p>
                </div>
            </section>

            <!-- Latest Release -->
            <section class="release-card">
                <div class="release-header">
                    <h2><span class="material-icons">new_releases</span> <span id="releaseTitle">Latest Release</span></h2>
                    <div class="version-badge" id="versionBadge">v1.0.0</div>
                </div>
                
                <div class="release-body">
                    <div class="release-date" id="releaseDate">Loading...</div>
                    
                    <h3 id="releaseNotesTitle">Release Notes</h3>
                    <div class="release-notes" id="releaseNotes">
                        <!-- Release notes will be loaded here -->
                    </div>
                </div>
                
                <div class="download-info">
                    <p><span class="material-icons" style="vertical-align: middle;">download</span> 
                       <span id="downloadCount">Loading download count...</span></p>
                </div>
            </section>
        </div>

        <!-- Download Section -->
        <section class="download-section">
            <h2 id="downloadTitle">Download Now</h2>
            <p id="downloadSubtitle">Free, no ads, completely offline</p>
            
            <a href="#" class="download-btn" id="downloadLink">
                <span class="material-icons">android</span>
                <span id="downloadText">Download APK</span>
            </a>
            <p class="file-size" id="fileSize">File size: Loading...</p>
        </section>

        <!-- Tips Section -->
        <section class="tips-section">
            <div class="tip-header">
                <span class="material-icons">tips_and_updates</span>
                <h3 id="tipTitle">Pro Tip</h3>
                <button class="refresh-tip" onclick="loadRandomTip()" title="New tip">
                    <span class="material-icons">refresh</span>
                </button>
            </div>
            <p class="tip-content" id="tipContent">Loading tip...</p>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-links">
            <a href="#" id="privacyLink">Privacy Policy</a>
            <a href="#" id="termsLink">Terms of Use</a>
            <a href="mailto:support@example.com" id="contactLink">Contact Support</a>
        </div>
        <div class="copyright" id="copyrightText">
            © 2025 Swiss Tournament Platform • Completely Free • No Ads
        </div>
    </footer>

    <!-- Language Switcher -->
    <div class="lang-switcher">
        <button class="lang-btn" onclick="toggleLanguage()">
            <span class="material-icons">language</span>
            <span id="langText">EN</span>
        </button>
    </div>
</div>

<script>
// Configuration
const GITHUB_OWNER = "mcco-com";
const GITHUB_REPO = "swiss-system";

// Texts in both languages
const texts = {
    en: {
        pageTitle: "Swiss Tournament App",
        pageSubtitle: "Free chess tournament management using the Swiss system",
        appInfoTitle: "App Information",
        appDescription: "A powerful offline tournament manager for chess competitions using the Swiss system. Perfect for local clubs and events.",
        features: [
            "100% offline functionality",
            "Swiss system pairings",
            "Player rankings & statistics",
            "JSON import/export",
            "Dark theme optimized",
            "No ads, completely free"
        ],
        requirementsTitle: "Requirements",
        requirementsText: "Android 6.0+ • 50MB free space • No internet required",
        releaseTitle: "Latest Release",
        releaseNotesTitle: "Release Notes",
        downloadTitle: "Download Now",
        downloadSubtitle: "Free, no ads, completely offline",
        downloadText: "Download APK",
        tipTitle: "Pro Tip",
        privacyLink: "Privacy Policy",
        termsLink: "Terms of Use",
        contactLink: "Contact Support",
        copyrightText: "© 2025 Swiss Tournament Platform • Completely Free • No Ads",
        langText: "EN",
        loading: "Loading...",
        downloadCount: "Downloads: ",
        fileSize: "File size: ",
        releaseDate: "Released: ",
        errorFetching: "Error fetching data. Please try again.",
        noReleaseNotes: "No release notes available.",
        tips: [
            "Use the Swiss system for fair tournament pairings",
            "Export your tournament data regularly as backup",
            "Start with 5-7 rounds for optimal tournament length",
            "Always verify player ratings before the tournament",
            "Use tie-break systems for fair ranking"
        ]
    },
    ar: {
        pageTitle: "تطبيق بطولة سويس",
        pageSubtitle: "إدارة مجانية لبطولات الشطرنج باستخدام النظام السويسري",
        appInfoTitle: "معلومات التطبيق",
        appDescription: "مدير بطولات قوي يعمل بدون إنترنت لمسابقات الشطرنج باستخدام النظام السويسري. مثالي للأندية والفعاليات المحلية.",
        features: [
            "يعمل 100% بدون إنترنت",
            "مقارنات النظام السويسري",
            "ترتيب اللاعبين والإحصائيات",
            "استيراد/تصدير JSON",
            "وضع داكن مخصص",
            "بدون إعلانات، مجاني تماماً"
        ],
        requirementsTitle: "المتطلبات",
        requirementsText: "أندرويد 6.0+ • 50MB مساحة حرة • لا يحتاج إنترنت",
        releaseTitle: "آخر إصدار",
        releaseNotesTitle: "ملاحظات الإصدار",
        downloadTitle: "حمّل الآن",
        downloadSubtitle: "مجاني، بدون إعلانات، يعمل دون إنترنت",
        downloadText: "تحميل APK",
        tipTitle: "نصيحة محترف",
        privacyLink: "سياسة الخصوصية",
        termsLink: "شروط الاستخدام",
        contactLink: "اتصل بالدعم",
        copyrightText: "© 2025 منصة بطولة سويس • مجاني تماماً • بدون إعلانات",
        langText: "AR",
        loading: "جاري التحميل...",
        downloadCount: "مرات التحميل: ",
        fileSize: "حجم الملف: ",
        releaseDate: "تاريخ الإصدار: ",
        errorFetching: "خطأ في جلب البيانات. يرجى المحاولة مرة أخرى.",
        noReleaseNotes: "لا توجد ملاحظات إصدار متاحة.",
        tips: [
            "استخدم النظام السويسري لمقارنات بطولات عادلة",
            "صدّر بيانات البطولة بانتظام كنسخة احتياطية",
            "ابدأ بـ 5-7 جولات لطول بطولة مثالي",
            "تحقق دائمًا من تصنيفات اللاعبين قبل البطولة",
            "استخدم أنظمة كسر التعادل لترتيب عادل"
        ]
    }
};

let currentLang = localStorage.getItem('lang') || 'en';
let currentTipIndex = 0;

// Initialize page
document.addEventListener('DOMContentLoaded', async () => {
    setLanguage(currentLang);
    await loadReleaseInfo();
    loadRandomTip();
    
    // Add animation class after content loads
    setTimeout(() => {
        document.body.classList.add('loaded');
    }, 300);
});

// Toggle between languages
function toggleLanguage() {
    currentLang = currentLang === 'en' ? 'ar' : 'en';
    localStorage.setItem('lang', currentLang);
    setLanguage(currentLang);
    
    // Reload tip in new language
    loadRandomTip();
}

// Set language for all elements
function setLanguage(lang) {
    const t = texts[lang];
    
    // Update HTML direction
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    
    // Update all text elements
    document.getElementById('pageTitle').textContent = t.pageTitle;
    document.getElementById('pageSubtitle').textContent = t.pageSubtitle;
    document.getElementById('appInfoTitle').textContent = t.appInfoTitle;
    document.getElementById('appDescription').textContent = t.appDescription;
    document.getElementById('requirementsTitle').textContent = t.requirementsTitle;
    document.getElementById('requirementsText').textContent = t.requirementsText;
    document.getElementById('releaseTitle').textContent = t.releaseTitle;
    document.getElementById('releaseNotesTitle').textContent = t.releaseNotesTitle;
    document.getElementById('downloadTitle').textContent = t.downloadTitle;
    document.getElementById('downloadSubtitle').textContent = t.downloadSubtitle;
    document.getElementById('downloadText').textContent = t.downloadText;
    document.getElementById('tipTitle').textContent = t.tipTitle;
    document.getElementById('privacyLink').textContent = t.privacyLink;
    document.getElementById('termsLink').textContent = t.termsLink;
    document.getElementById('contactLink').textContent = t.contactLink;
    document.getElementById('copyrightText').textContent = t.copyrightText;
    document.getElementById('langText').textContent = t.langText;
    
    // Update features list
    const featuresList = document.getElementById('featuresList');
    featuresList.innerHTML = '';
    t.features.forEach(feature => {
        const li = document.createElement('li');
        li.innerHTML = `<span class="material-icons feature-icon">check_circle</span> ${feature}`;
        featuresList.appendChild(li);
    });
    
    // Update placeholder texts
    document.getElementById('downloadCount').textContent = t.loading;
    document.getElementById('fileSize').textContent = t.fileSize + t.loading;
    document.getElementById('releaseDate').textContent = t.releaseDate + t.loading;
}

// Load release info from GitHub API
async function loadReleaseInfo() {
    try {
        const url = `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/releases`;
        const response = await fetch(url);
        const releases = await response.json();
        
        if (releases && releases.length > 0) {
            const latestRelease = releases[0];
            
            // Update version
            document.getElementById('versionBadge').textContent = latestRelease.tag_name || 'v1.0.0';
            
            // Update release date
            const date = new Date(latestRelease.published_at);
            const dateText = date.toLocaleDateString(currentLang === 'ar' ? 'ar-SA' : 'en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('releaseDate').textContent = 
                (currentLang === 'ar' ? 'تاريخ الإصدار: ' : 'Released: ') + dateText;
            
            // Update release notes
            const notes = latestRelease.body || texts[currentLang].noReleaseNotes;
            document.getElementById('releaseNotes').innerHTML = formatReleaseNotes(notes);
            
            // Update download link and info
            const apkAsset = latestRelease.assets.find(asset => asset.name.endsWith('.apk'));
            if (apkAsset) {
                const downloadLink = document.getElementById('downloadLink');
                downloadLink.href = apkAsset.browser_download_url;
                downloadLink.classList.remove('loading');
                
                // File size
                const sizeMB = (apkAsset.size / (1024 * 1024)).toFixed(1);
                document.getElementById('fileSize').textContent = 
                    (currentLang === 'ar' ? 'حجم الملف: ' : 'File size: ') + sizeMB + ' MB';
                
                // Download count
                document.getElementById('downloadCount').textContent = 
                    (currentLang === 'ar' ? 'مرات التحميل: ' : 'Downloads: ') + apkAsset.download_count;
            }
        }
    } catch (error) {
        console.error('Error fetching release info:', error);
        document.getElementById('releaseNotes').textContent = texts[currentLang].errorFetching;
    }
}

// Format release notes (convert markdown-ish text to HTML)
function formatReleaseNotes(notes) {
    return notes
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\n/g, '<br>')
        .replace(/- (.*?)(?=<br>|$)/g, '• $1<br>');
}

// Load random tip
function loadRandomTip() {
    const tips = texts[currentLang].tips;
    currentTipIndex = Math.floor(Math.random() * tips.length);
    document.getElementById('tipContent').textContent = tips[currentTipIndex];
    
    // Add fade animation
    const tipElement = document.getElementById('tipContent');
    tipElement.classList.remove('fade-in');
    void tipElement.offsetWidth; // Trigger reflow
    tipElement.classList.add('fade-in');
}

// Privacy and Terms links (placeholder - update with actual URLs)
document.getElementById('privacyLink').onclick = (e) => {
    e.preventDefault();
    alert(currentLang === 'ar' 
        ? 'سيتم توجيهك إلى سياسة الخصوصية' 
        : 'You will be redirected to Privacy Policy');
    // window.location.href = 'privacy.html';
};

document.getElementById('termsLink').onclick = (e) => {
    e.preventDefault();
    alert(currentLang === 'ar' 
        ? 'سيتم توجيهك إلى شروط الاستخدام' 
        : 'You will be redirected to Terms of Use');
    // window.location.href = 'terms.html';
};

// Add skeleton loading effect
function showSkeletonLoading() {
    document.body.classList.add('loading');
}

function hideSkeletonLoading() {
    document.body.classList.remove('loading');
}
</script>
</body>
</html>